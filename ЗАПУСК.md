# üöÄ KOSMOS BACKEND - –ì–û–¢–û–í –ö –ó–ê–ü–£–°–ö–£!

## –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

‚úÖ **–ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ–∑–¥–∞–Ω–∞**
‚úÖ **FastAPI —Å–µ—Ä–≤–µ—Ä —Å –≤—Å–µ–º–∏ endpoints**  
‚úÖ **–¢–≤–æ–π –ø—Ä–æ—Ç–æ—Ç–∏–ø –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ rag_engine.py**
‚úÖ **API –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**
‚úÖ **–í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–ø–∏—Å–∞–Ω—ã**

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
kosmos-backend/
‚îú‚îÄ‚îÄ main.py                 ‚Üê –ó–ê–ü–£–°–ö–ê–¢–¨ –û–¢–°–Æ–î–ê
‚îú‚îÄ‚îÄ rag_engine.py           ‚Üê —Ç–≤–æ–π –ø—Ä–æ—Ç–æ—Ç–∏–ø + –∞–¥–∞–ø—Ç–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ api-contract.yaml       ‚Üê OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è  
‚îú‚îÄ‚îÄ config.json             ‚Üê –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ KB
‚îú‚îÄ‚îÄ requirements.txt        ‚Üê –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ data/                   ‚Üê –∫—ç—à–∏ (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îî‚îÄ‚îÄ README.md              ‚Üê –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
pip install -r requirements.txt
```

### 2. –ó–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä
```bash
python main.py
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –Ω–∞ `http://localhost:3200`

### 3. –ü—Ä–æ–≤–µ—Ä—å —Ä–∞–±–æ—Ç—É
- Health: http://localhost:3200/api/health
- Swagger: http://localhost:3200/docs
- Items: http://localhost:3200/api/items

## –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ü–†–Ø–ú–û –°–ï–ô–ß–ê–°

- ‚úÖ **Self-parsing** - –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–∞–º —Å–µ–±—è (rag_engine.py)
- ‚úÖ **L1 –≥—Ä–∞—Ñ** - —Å—Ç—Ä–æ–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É —Ñ—É–Ω–∫—Ü–∏—è–º–∏/–∫–ª–∞—Å—Å–∞–º–∏
- ‚úÖ **L2 –æ–ø–∏—Å–∞–Ω–∏—è** - –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å fallback (–±–µ–∑ LLM –ø–æ–∫–∞ mock)
- ‚úÖ **–í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫** - —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ (mock –±–µ–∑ sentence-transformers)
- ‚úÖ **–í—Å–µ API endpoints** - –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ –Ω–æ–≤–æ–º—É –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É OpenAPI 3.0.3
- ‚úÖ **–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫** - –≤–µ–∫—Ç–æ—Ä—ã + –≥—Ä–∞—Ñ
- ‚úÖ **Pipeline Management** - –∑–∞–ø—É—Å–∫, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ, –æ—Ç–º–µ–Ω–∞ pipeline
- ‚úÖ **Server-Sent Events** - real-time –ª–æ–≥–∏ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å
- ‚úÖ **–§–∞–π–ª–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞, –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
- ‚úÖ **CORS –ø–æ–¥–¥–µ—Ä–∂–∫–∞** - –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## Endpoints (–ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫)

### Core API
- `GET /api/health` - —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞
- `GET /api/items` - –≤—Å–µ AI —ç–ª–µ–º–µ–Ω—Ç—ã
- `GET /api/items/{id}` - –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç  
- `GET /api/graph` - –≥—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- `GET /api/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ dashboard

### Knowledge Base
- `GET /api/kb-config` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ KB
- `POST /api/kb-config` - –æ–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ KB

### RAG Chat
- `POST /api/chat` - —á–∞—Ç —Å RAG —Å–∏—Å—Ç–µ–º–æ–π

### Pipeline Management
- `POST /api/pipeline/start` - –∑–∞–ø—É—Å—Ç–∏—Ç—å pipeline
- `GET /api/pipeline/{id}` - —Å—Ç–∞—Ç—É—Å pipeline
- `DELETE /api/pipeline/{id}` - –æ—Ç–º–µ–Ω–∏—Ç—å pipeline
- `GET /api/pipeline` - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö pipeline
- `GET /api/pipeline/{id}/progress` - –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å
- `GET /api/pipeline/stats/global` - –≥–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `GET /api/pipeline/errors` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫
- `POST /api/pipeline/step/{stepId}/run` - –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —à–∞–≥
- `GET /api/pipeline/steps/status` - —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —à–∞–≥–æ–≤

### Streaming (SSE)
- `GET /api/logs/stream` - –ø–æ—Ç–æ–∫ –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- `GET /api/pipeline/{id}/stream` - –ø–æ—Ç–æ–∫ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ pipeline
- `GET /api/pipeline/stream/global` - –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è pipeline

### Files & Logs
- `GET /api/logs` - –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ (—Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π)
- `GET /api/files` - —Ñ–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### System
- `GET /api/contract` - OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è (YAML/JSON)

## –ß—Ç–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–∞–ª—å—à–µ

1. **LLM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –≤ `/api/chat` endpoint –∑–∞–º–µ–Ω–∏ –∑–∞–≥–ª—É—à–∫—É –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π LLM
2. **Sentence Transformers** - —É—Å—Ç–∞–Ω–æ–≤–∏ –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
3. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ L2** - –¥–æ–±–∞–≤—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫—É L2 –æ–ø–∏—Å–∞–Ω–∏–π

## –ì–æ—Ç–æ–≤–æ! üéâ

–¢–≤–æ–π –ø—Ä–æ—Ç–æ—Ç–∏–ø —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –≤–µ–±-—Å–µ—Ä–≤–µ—Ä. –í—Å–µ —Ç–≤–æ–∏ –∫–ª–∞—Å—Å—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ –µ—Å—Ç—å, —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤–µ–±-endpoints —Å–≤–µ—Ä—Ö—É.
