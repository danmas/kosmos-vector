# –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–∏—Å—Ç–µ–º–µ AI Items

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 13 –Ω–æ—è–±—Ä—è 2025  
**–ü—Ä–æ–µ–∫—Ç:** AIAN Vector  
**–°—Ç–∞—Ç—É—Å:** –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è  

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–í–≤–µ–¥–µ–Ω–∏–µ –∏ –∫–æ–Ω—Ü–µ–ø—Ü–∏—è](#–≤–≤–µ–¥–µ–Ω–∏–µ-–∏-–∫–æ–Ω—Ü–µ–ø—Ü–∏—è)
2. [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è](#—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
3. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
4. [API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å AI Items](#api-–¥–ª—è-—Ä–∞–±–æ—Ç—ã-—Å-ai-items)
5. [–ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è](#–ø—Ä–æ—Ü–µ—Å—Å-—Å–æ–∑–¥–∞–Ω–∏—è-–∏-–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)
6. [–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö —á–∞–Ω–∫–æ–≤](#–≥–µ–Ω–µ—Ä–∞—Ü–∏—è-–º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö-—á–∞–Ω–∫–æ–≤)
7. [–°–≤—è–∑–∏ –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏](#—Å–≤—è–∑–∏-–º–µ–∂–¥—É-–æ–±—ä–µ–∫—Ç–∞–º–∏)
8. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
9. [–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏](#–ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞-–∏-–Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏)
10. [–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏](#–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏)
11. [–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
12. [–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã](#–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è-—Å–∏—Å—Ç–µ–º—ã)

---

## –í–≤–µ–¥–µ–Ω–∏–µ –∏ –∫–æ–Ω—Ü–µ–ø—Ü–∏—è

### –ß—Ç–æ —Ç–∞–∫–æ–µ AI Item?

**AI Item** ‚Äî —ç—Ç–æ –∫–ª—é—á–µ–≤–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ AIAN Vector, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∞—è **–ª–æ–≥–∏—á–µ—Å–∫—É—é —Å—É—â–Ω–æ—Å—Ç—å** (—ç–ª–µ–º–µ–Ω—Ç –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞), –∫–æ—Ç–æ—Ä–∞—è —Å–≤—è–∑—ã–≤–∞–µ—Ç—Å—è —Å —á–∞–Ω–∫–∞–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤. –≠—Ç–æ –ø–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å **—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏** –∫–æ–¥–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –∑–Ω–∞–Ω–∏–π.

### –û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è –ø—Ä–æ–µ–∫—Ç–∞

–û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è –∑–∞–∫–ª—é—á–∞–ª–∞—Å—å –≤ —Å–æ–∑–¥–∞–Ω–∏–∏ **–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–π —Å–∏—Å—Ç–µ–º—ã –∑–Ω–∞–Ω–∏–π** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–µ–π:

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤** –∏–∑ –∫–æ–¥–∞ (—Ñ—É–Ω–∫—Ü–∏–∏, –∫–ª–∞—Å—Å—ã, —Ç–∞–±–ª–∏—Ü—ã SQL)
2. **–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —á–∞–Ω–∫–æ–≤**:
   - `0-–∏—Å—Ö–æ–¥–Ω–∏–∫` ‚Äî –±–∞–∑–æ–≤—ã–µ —á–∞–Ω–∫–∏ –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞
   - `1-—Å–≤—è–∑–∏` ‚Äî —Å–≤—è–∑–∏ –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏  
   - `2-–ª–æ–≥–∏–∫–∞` ‚Äî –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –≤—ã–≤–æ–¥—ã –∏ –∞–Ω–∞–ª–∏–∑

3. **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞** —á–µ—Ä–µ–∑ `context_code`
4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ** ‚Äî –ø—Ä–∏ –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–∞–Ω–∫–∞ —É—Ä–æ–≤–Ω—è 0 —Å `full_name` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è AI Item

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```sql
-- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã ai_item
CREATE TABLE ai_item (
    id SERIAL PRIMARY KEY,
    full_name TEXT NOT NULL,           -- –ü–æ–ª–Ω–æ–µ –∏–º—è –æ–±—ä–µ–∫—Ç–∞
    context_code TEXT DEFAULT 'DEFAULT', -- –ö–æ–¥ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
    type TEXT,                         -- –¢–∏–ø –æ–±—ä–µ–∫—Ç–∞ (function, class, table)
    s_name TEXT,                       -- –ö–æ—Ä–æ—Ç–∫–æ–µ –∏–º—è
    h_name TEXT,                       -- –ß–µ–ª–æ–≤–µ–∫–æ-–ø–æ–Ω—è—Ç–Ω–æ–µ –∏–º—è
    file_id INT REFERENCES files(id),  -- –°–≤—è–∑—å —Å —Ñ–∞–π–ª–æ–º
    created_at TIMESTAMPTZ,
    updated_at TIMESTAMPTZ
);
```

**–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å:** `full_name` + `context_code`

### –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä—Å–µ—Ä—ã

**–§–∞–π–ª:** `packages/core/textSplitters.js`

#### JavaScript/TypeScript —Å–ø–ª–∏—Ç—Ç–µ—Ä: `splitJsByObjects()`
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç: —Ñ—É–Ω–∫—Ü–∏–∏, –º–µ—Ç–æ–¥—ã, –∫–ª–∞—Å—Å—ã, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –∏–º–ø–æ—Ä—Ç—ã/—ç–∫—Å–ø–æ—Ä—Ç—ã
- –û–ø—Ü–∏–∏: `includeComments`, `parseImports`
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç `full_name`, `s_name`, `h_name` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞

#### SQL —Å–ø–ª–∏—Ç—Ç–µ—Ä: `splitSqlByObjects()`
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç: —Ç–∞–±–ª–∏—Ü—ã, —Ñ—É–Ω–∫—Ü–∏–∏, –ø—Ä–æ—Ü–µ–¥—É—Ä—ã, views, materialized views, triggers, indexes, sequences, types, domains, schemas, roles, grants
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏–º–µ–Ω–∞ —Å–æ —Å—Ö–µ–º–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä: `public.users`)
- –î–ª—è —Ñ—É–Ω–∫—Ü–∏–π –≤–∫–ª—é—á–∞–µ—Ç —Å–∏–≥–Ω–∞—Ç—É—Ä—É

#### Markdown —Å–ø–ª–∏—Ç—Ç–µ—Ä: `splitMarkdownBySections()`
- –†–∞–∑–±–∏–≤–∞–µ—Ç –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º —É–∫–∞–∑–∞–Ω–Ω—ã—Ö —É—Ä–æ–≤–Ω–µ–π
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–µ—Ä–∞—Ä—Ö–∏—é –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ (`parent_heading`)
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç `s_name` (–∫—Ä–∞—Ç–∫–æ–µ –∏–º—è —Å–µ–∫—Ü–∏–∏), `h_name` (–ø–æ–ª–Ω–æ–µ –∏–º—è —Å –∏–µ—Ä–∞—Ä—Ö–∏–µ–π)

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –°–≤—è–∑—å –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏

```sql
-- –¢–∞–±–ª–∏—Ü–∞ ai_item - –æ—Å–Ω–æ–≤–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å
CREATE TABLE public.ai_item (
  id serial PRIMARY KEY,
  full_name text NOT NULL,              -- –ü–æ–ª–Ω–æ–µ –∏–º—è –æ–±—ä–µ–∫—Ç–∞
  context_code text NOT NULL DEFAULT 'DEFAULT',
  file_id int REFERENCES files(id) ON DELETE SET NULL,
  type text,                             -- function, class, table, etc.
  s_name text,                           -- –ö–æ—Ä–æ—Ç–∫–æ–µ –∏–º—è
  h_name text,                           -- –ß–µ–ª–æ–≤–µ–∫–æ-—á–∏—Ç–∞–µ–º–æ–µ –∏–º—è
  created_at timestamptz DEFAULT now(),
  updated_at timestamptz DEFAULT now()
);

-- –¢–∞–±–ª–∏—Ü–∞ chunk_vector - —á–∞–Ω–∫–∏ —Å –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
CREATE TABLE public.chunk_vector (
  id serial PRIMARY KEY,
  file_id int REFERENCES files(id) ON DELETE CASCADE,
  ai_item_id int REFERENCES ai_item(id) ON DELETE SET NULL,  -- –°–≤—è–∑—å —Å AI Item
  parent_chunk_id int REFERENCES chunk_vector(id) ON DELETE CASCADE,
  chunk_content text NOT NULL,
  embedding vector,                      -- –í–µ–∫—Ç–æ—Ä —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–∏ 1536
  chunk_index int,
  type text DEFAULT '—Ç–µ–∫—Å—Ç',
  level text DEFAULT '0-–∏—Å—Ö–æ–¥–Ω–∏–∫',       -- 0-–∏—Å—Ö–æ–¥–Ω–∏–∫ | 1-—Å–≤—è–∑–∏ | 2-–ª–æ–≥–∏–∫–∞
  s_name text,
  h_name text,
  full_name text,
  created_at timestamptz DEFAULT now()
);
```

### –ò–µ—Ä–∞—Ä—Ö–∏—è —á–∞–Ω–∫–æ–≤
- L0 —á–∞–Ω–∫: `parent_chunk_id = NULL`, `level = '0-–∏—Å—Ö–æ–¥–Ω–∏–∫'`
- L1 —á–∞–Ω–∫: `parent_chunk_id = {L0.id}`, `level = '1-—Å–≤—è–∑–∏'`  
- L2 —á–∞–Ω–∫: `parent_chunk_id = {L0.id}`, `level = '2-–ª–æ–≥–∏–∫–∞'`

–í—Å–µ —á–∞–Ω–∫–∏ –æ–¥–Ω–æ–≥–æ AI Item —Å–≤—è–∑–∞–Ω—ã —á–µ—Ä–µ–∑ `ai_item_id`.

---

## API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å AI Items

–í —Å–∏—Å—Ç–µ–º–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ API-–º–∞—Ä—à—Ä—É—Ç—ã:

- `GET /ai-items` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö ai_item
- `GET /ai-item/:id` - –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º ai_item
- `POST /ai-item/:id/update-context` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ ai_item
- `GET /ai-item/:id/chunks` - –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —á–∞–Ω–∫–æ–≤, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å ai_item
- `POST /ai-items/cleanup` - –û—á–∏—Å—Ç–∫–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö ai_item
- `POST /api/ai/ai-item/:id/generate-chunk` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è L1/L2 —á–∞–Ω–∫–æ–≤

---

## –ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –ú–µ—Ö–∞–Ω–∏–∑–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è

**–§–∞–π–ª:** `packages/core/DbService.js`, –º–µ—Ç–æ–¥ `saveChunkVector()`, —Å—Ç—Ä–æ–∫–∏ 226-314

```javascript
// –ï—Å–ª–∏ —ç—Ç–æ —á–∞–Ω–∫ —É—Ä–æ–≤–Ω—è 0 –∏ —É –Ω–µ–≥–æ –µ—Å—Ç—å full_name, —Å–æ–∑–¥–∞–µ–º –∏–ª–∏ —Å–≤—è–∑—ã–≤–∞–µ–º —Å ai_item
if (level === '0-–∏—Å—Ö–æ–¥–Ω–∏–∫' && full_name) {
  console.log(`[DB] –°–æ–∑–¥–∞–Ω–∏–µ AI Item –¥–ª—è —á–∞–Ω–∫–∞ —Å full_name: "${full_name}"`);
  
  // –ü–æ–ª—É—á–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –∫–æ–¥ —Ñ–∞–π–ª–∞
  const contextCode = fileInfoResult.rows[0]?.context_code || 'DEFAULT';
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ AI Item —Å —Ç–∞–∫–∏–º full_name + context_code
  // –ï—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç - —Å–≤—è–∑—ã–≤–∞–µ–º —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º
  // –ï—Å–ª–∏ –Ω–µ—Ç - —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π
}
```

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

1. **–í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–∞** ‚Üí –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–ª–∏—Ç—Ç–µ—Ä –∏–∑–≤–ª–µ–∫–∞–µ—Ç –æ–±—ä–µ–∫—Ç—ã
2. **–î–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ —Å `full_name`**:
   - –°–æ–∑–¥–∞–µ—Ç—Å—è –∏–ª–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `AI Item` (—É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ `full_name` + `context_code`)
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —á–∞–Ω–∫ **—É—Ä–æ–≤–Ω—è L0 (0-–∏—Å—Ö–æ–¥–Ω–∏–∫)** —Å –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º
   - –ß–∞–Ω–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≤—è–∑—ã–≤–∞–µ—Ç—Å—è —Å `AI Item` —á–µ—Ä–µ–∑ `ai_item_id`

### –°–≤—è–∑—å "–§–∞–π–ª ‚Üí AI Item"
- **–û–¥–∏–Ω –∫–æ –º–Ω–æ–≥–∏–º**: –ò–∑ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è **–º–Ω–æ–∂–µ—Å—Ç–≤–æ** AI Items
- –ü—Ä–∏–º–µ—Ä: —Ñ–∞–π–ª `api.js` —Å 3 —Ñ—É–Ω–∫—Ü–∏—è–º–∏ ‚Üí 3 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö AI Items
- –ö–∞–∂–¥—ã–π AI Item –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—É—é –ª–æ–≥–∏—á–µ—Å–∫—É—é —Å—É—â–Ω–æ—Å—Ç—å (—Ñ—É–Ω–∫—Ü–∏—è, –∫–ª–∞—Å—Å, —Ç–∞–±–ª–∏—Ü–∞, —Å–µ–∫—Ü–∏—è MD)

### –£–¥–∞–ª–µ–Ω–∏–µ –∏ –æ—á–∏—Å—Ç–∫–∞

–ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —á–∞–Ω–∫–∞ —É—Ä–æ–≤–Ω—è 0 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `ai_item`, –µ—Å–ª–∏ –Ω–∞ –Ω–µ–µ –±–æ–ª—å—à–µ –Ω–µ—Ç —Å—Å—ã–ª–æ–∫.

---

## –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö —á–∞–Ω–∫–æ–≤

### –î–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã

**1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º** (—Å–µ—Ä–≤–µ—Ä –≤—ã–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–º–ø—Ç—ã –∏–∑ `.env`):

```json
{
  "level": 1,  // –∏–ª–∏ 2
  "model": "gpt-4"  // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
}
```

–õ–æ–≥–∏–∫–∞:
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø —Ñ–∞–π–ª–∞ –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é (`.js`, `.sql`, `.md`)
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –æ–±—ä–µ–∫—Ç–∞ –∏–∑ `ai_item.type` (function, class, table, etc.)
- –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç —Ç–∏–ø—ã –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º `.env`
- –ù–∞—Ö–æ–¥–∏—Ç —à–∞–±–ª–æ–Ω—ã: `{FILE_TYPE}_L{LEVEL}_{OBJECT_TYPE}_PROMPT` –∏ `*_INPUT_TEXT`
- –ü—Ä–∏–º–µ—Ä: `JS_L1_FUNCTION_PROMPT`, `SQL_L2_TABLE_INPUT_TEXT`

**2. –†—É—á–Ω–æ–π —Ä–µ–∂–∏–º** (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–¥–∞–µ—Ç —Å–≤–æ–∏ –ø—Ä–æ–º–ø—Ç—ã):

```json
{
  "level": 1,
  "prompt": "–û–ø–∏—à–∏ —Å–≤—è–∑–∏ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏",
  "inputText": "–ö–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–Ω–∞ –≤—ã–∑—ã–≤–∞–µ—Ç?"
}
```

### –ü—Ä–æ—Ü–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

1. –ü–æ–ª—É—á–∞–µ—Ç AI Item –∏ –µ–≥–æ L0 —á–∞–Ω–∫ (–∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥)
2. –£–¥–∞–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —á–∞–Ω–∫–∏ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è (L1 –∏–ª–∏ L2)
3. –í—ã–∑—ã–≤–∞–µ—Ç –≤–Ω–µ—à–Ω–∏–π AI-—Å–µ—Ä–≤–∏—Å (`REQ_SERVER_URL`) –∏–ª–∏ mock-—Ñ—É–Ω–∫—Ü–∏—é
4. –°–æ–∑–¥–∞–µ—Ç embedding –¥–ª—è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
5. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –Ω–æ–≤—ã–π —á–∞–Ω–∫ –∫–∞–∫ –¥–æ—á–µ—Ä–Ω–∏–π –∫ L0 —á–∞–Ω–∫—É
6. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `promptInfo` —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ä–µ–∂–∏–º–µ –∏ —à–∞–±–ª–æ–Ω–∞—Ö

---

## –°–≤—è–∑–∏ –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏

### –í–∞–∂–Ω–æ: —Å–≤—è–∑–∏ –ù–ï –∂–µ—Å—Ç–∫–∏–µ, –∞ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ!

–°–≤—è–∑–∏ –º–µ–∂–¥—É AI Items —Ö—Ä–∞–Ω—è—Ç—Å—è **–Ω–µ –∫–∞–∫ –≥—Ä–∞—Ñ –≤ –ë–î**, –∞ –∫–∞–∫ **—Ç–µ–∫—Å—Ç–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ** –≤ —á–∞–Ω–∫–∞—Ö —É—Ä–æ–≤–Ω—è L1.

**–ü—Ä–∏–º–µ—Ä:**

AI Item: `calculateTotal(orderId)`
- **L0 —á–∞–Ω–∫:** –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ —Ñ—É–Ω–∫—Ü–∏–∏
- **L1 —á–∞–Ω–∫:** "–§—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç `getOrderItems(orderId)` –∏ `applyDiscount(price)`. –î–µ–ª–∞–µ—Ç SELECT –∫ —Ç–∞–±–ª–∏—Ü–µ `products`."
- **L2 —á–∞–Ω–∫:** "–í—ã—á–∏—Å–ª—è–µ—Ç –∏—Ç–æ–≥–æ–≤—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞–∫–∞–∑–∞ —Å —É—á–µ—Ç–æ–º —Å–∫–∏–¥–æ–∫."

–í L1 —á–∞–Ω–∫–µ —É–ø–æ–º–∏–Ω–∞—é—Ç—Å—è –¥—Ä—É–≥–∏–µ AI Items (`getOrderItems`, `applyDiscount`, `products`), –Ω–æ **–Ω–µ—Ç –ø—Ä—è–º—ã—Ö FK-—Å—Å—ã–ª–æ–∫**.

### –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–≤—è–∑–∏

- **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫:** –ö–æ–≥–¥–∞ —Å–ø—Ä–∞—à–∏–≤–∞–µ—à—å "–ß—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–∞–±–ª–∏—Ü—É products?", RAG –Ω–∞—Ö–æ–¥–∏—Ç L1 —á–∞–Ω–∫ —Å —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º "products"
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è LLM:** L1 —á–∞–Ω–∫–∏ –≤–∫–ª—é—á–∞—é—Ç—Å—è –≤ –ø—Ä–æ–º–ø—Ç –¥–ª—è –±–æ–ª–µ–µ –≥–ª—É–±–æ–∫–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –∫–æ–¥–∞

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ—Å—Ç: `tests/test-epample-ShoppingCart.js`

**–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —Å–∫–≤–æ–∑–Ω–æ–π —Ç–µ—Å—Ç –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã:**

#### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:

1. ‚úÖ **–í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è JS —Ñ–∞–π–ª–∞** (`docs/shoppingCart.js`)
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ AI Items –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ L0 —á–∞–Ω–∫–æ–≤ —Å –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º

2. ‚úÖ **–í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è MD —Ñ–∞–π–ª–∞** (`docs/shopping_cart_spec.md`)
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ AI Items –¥–ª—è —Å–µ–∫—Ü–∏–π
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ L0 —á–∞–Ω–∫–æ–≤ —Å —Ç–µ–∫—Å—Ç–æ–º —Å–µ–∫—Ü–∏–π

3. ‚úÖ **–ü–æ–∏—Å–∫ AI Items –≤ –ë–î**
   - –ü–æ –∏–º–µ–Ω–∏ —Ñ—É–Ω–∫—Ü–∏–∏: `ShoppingCart.calculateTotal`
   - –ü–æ –∏–º–µ–Ω–∏ —Å–µ–∫—Ü–∏–∏: `–†–∞—Å—á–µ—Ç –∏—Ç–æ–≥–æ–≤–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ (calculateTotal)`

4. ‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è L1/L2 –≤ —Ä—É—á–Ω–æ–º —Ä–µ–∂–∏–º–µ**
   - –ü–µ—Ä–µ–¥–∞—á–∞ custom `prompt` –∏ `inputText`
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ `promptInfo.type === 'custom'`
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤

5. ‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è L1/L2 –≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ–∂–∏–º–µ**
   - –î–ª—è JS —Ñ—É–Ω–∫—Ü–∏–π: –ø—Ä–æ–≤–µ—Ä–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤ `JS_L1_FUNCTION_PROMPT`
   - –î–ª—è MD —Å–µ–∫—Ü–∏–π: –ø—Ä–æ–≤–µ—Ä–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤ `MD_L1_SECTION_PROMPT`
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ `promptInfo.type === 'auto'`
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤

6. ‚úÖ **–ü–æ–ª—É—á–µ–Ω–∏–µ —á–∞–Ω–∫–æ–≤ –ø–æ —É—Ä–æ–≤–Ω—è–º**
   - –ó–∞–ø—Ä–æ—Å —á–∞–Ω–∫–æ–≤ L0, L1, L2 –¥–ª—è AI Item
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

#### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞:

```bash
npm run test:shopping-cart
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –¢–µ—Å—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **mock AI —Å–µ—Ä–≤–∏—Å** (—Ñ—É–Ω–∫—Ü–∏—è `callAiService()` –≤ `routes/ai.js`), –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –∫ OpenAI.

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã

- `tests/full_cycle_test.js` - –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –¥–ª—è –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
- `tests/folder_cycle_test.js` - –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- `tests/md_cycle_test.js` - –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è Markdown
- `tests/api_test.js` - Smoke —Ç–µ—Å—Ç—ã API
- `tests/run_all_tests.js` - –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

---

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏

### üü¢ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–æ–¥—É**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
   - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞–º –∏ —Ç–∏–ø–∞–º
   - –°–≤—è–∑–∏ –º–µ–∂–¥—É —Ñ–∞–π–ª–∞–º–∏ –∏ –æ–±—ä–µ–∫—Ç–∞–º–∏

2. **–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∞**
   - –ò—Å—Ö–æ–¥–Ω–∏–∫–∏ ‚Üí –°–≤—è–∑–∏ ‚Üí –õ–æ–≥–∏–∫–∞
   - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ –∑–Ω–∞–Ω–∏—è

3. **Semantic Search —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º**
   - –ü–æ–∏—Å–∫ –ø–æ —Ç–∏–ø–∞–º –æ–±—ä–µ–∫—Ç–æ–≤
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —É—Ä–æ–≤–Ω—è–º –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏
   - –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞

4. **UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–Ω–∞–Ω–∏—è–º–∏**
   - –ü—Ä–æ—Å–º–æ—Ç—Ä AI Items –∏ –∏—Ö —á–∞–Ω–∫–æ–≤
   - –°–æ–∑–¥–∞–Ω–∏–µ —Å–≤—è–∑–µ–π –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏
   - –≠–∫—Å–ø–æ—Ä—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### üî¥ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –ø—Ä–æ–±–ª–µ–º—ã

1. **–°–ª–æ–∂–Ω–æ—Å—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**
   ```javascript
   // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ AI Item –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —á–∞–Ω–∫–∞
   if (level === '0-–∏—Å—Ö–æ–¥–Ω–∏–∫' && full_name) {
     // –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –ø—Ä–æ–≤–µ—Ä–æ–∫ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–≤—è–∑–µ–π
     // –£—Å–ª–æ–∂–Ω—è–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫—É
   }
   ```

2. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**
   - –ü–∞—Ä—Å–∏–Ω–≥ SQL/JS —ç–≤—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π, –Ω–µ 100% —Ç–æ—á–Ω—ã–π
   - –¢—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞–º–∏
   - –°–≤—è–∑–∏ –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –ø–æ–ª—É–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

3. **–ü—Ä–æ–±–ª–µ–º—ã –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏**
   - –ü—Ä–∏ –±–æ–ª—å—à–∏—Ö –∫–æ–¥–æ–≤—ã—Ö –±–∞–∑–∞—Ö —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ AI Items
   - –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏
   - –°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏

4. **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –≥–∏–±–∫–æ—Å—Ç—å**
   - –ñ–µ—Å—Ç–∫–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –∫ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ `full_name`+`context_code`
   - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã —Ñ–∞–π–ª–æ–≤ (JS, SQL, MD)
   - –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è

5. **L1/L2 –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**
   - –ü—Ä–∏ –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Ñ–∞–π–ª–∞ —Å–æ–∑–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ L0 —á–∞–Ω–∫–∏
   - –î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ L1/L2 –Ω—É–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ API endpoints

### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **Orphaned AI Items** ‚Äî –æ—Å—Ç–∞—é—Ç—Å—è –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è —á–∞–Ω–∫–æ–≤
2. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤** –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
3. **–°–ª–æ–∂–Ω–æ—Å—Ç—å –º–∏–≥—Ä–∞—Ü–∏–π** –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ö–µ–º—ã
4. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è** –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ AI Items

---

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å

**1. –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è AI Items + L0):**

```bash
# –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤
POST /scan-folder
Body: { "path": "C:/my-project/src" }

# –ò–ª–∏ –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
POST /vectorize
Body: { 
  "fileName": "api.js",
  "contextCode": "BACKEND",
  "params": { "includeComments": true }
}
```

**2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ AI Items:**

```bash
GET /ai-items?contextCode=BACKEND
```

**3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è L1 –∏ L2 –¥–ª—è –∫–ª—é—á–µ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤:**

```javascript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å —à–∞–±–ª–æ–Ω–∞–º–∏ –∏–∑ .env
for (const item of aiItems) {
  // L1 (—Å–≤—è–∑–∏)
  await fetch(`/api/ai/ai-item/${item.id}/generate-chunk`, {
    method: 'POST',
    body: JSON.stringify({ level: 1 })
  });
  
  // L2 (–ª–æ–≥–∏–∫–∞)
  await fetch(`/api/ai/ai-item/${item.id}/generate-chunk`, {
    method: 'POST',
    body: JSON.stringify({ level: 2 })
  });
}
```

**4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ RAG:**

```bash
POST /ask
Body: {
  "question": "–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è calculateTotal?",
  "contextCode": "BACKEND",
  "chunkLevel": null  # –ò—â–µ—Ç –≤–æ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö (L0, L1, L2)
}
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é

- **–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å L1/L2 —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–ª—é—á–µ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤** –∏–ª–∏ –ø–æ –∑–∞–ø—Ä–æ—Å—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –∫–æ–¥—ã** –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- **–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–æ–¥–∏—Ç—å –æ—á–∏—Å—Ç–∫—É** –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö AI Items

---

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–∂–∏–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ L1/L2 –Ω—É–∂–Ω—ã —à–∞–±–ª–æ–Ω—ã –≤ `.env`:

### JavaScript:
```
JS_L1_FUNCTION_PROMPT=–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –∏ –æ–ø–∏—à–∏ –µ–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
JS_L1_FUNCTION_INPUT_TEXT=–ö–∞–∫–∏–µ –¥—Ä—É–≥–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–Ω–∞ –≤—ã–∑—ã–≤–∞–µ—Ç? –ö –∫–∞–∫–∏–º –¥–∞–Ω–Ω—ã–º –æ–±—Ä–∞—â–∞–µ—Ç—Å—è?
JS_L2_FUNCTION_PROMPT=–û–ø–∏—à–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
JS_L2_FUNCTION_INPUT_TEXT=–ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏?

JS_L1_CLASS_PROMPT=...
JS_L1_CLASS_INPUT_TEXT=...
JS_L2_CLASS_PROMPT=...
JS_L2_CLASS_INPUT_TEXT=...
```

### SQL:
```
SQL_L1_TABLE_PROMPT=–û–ø–∏—à–∏ —Å–≤—è–∑–∏ —ç—Ç–æ–π —Ç–∞–±–ª–∏—Ü—ã
SQL_L1_TABLE_INPUT_TEXT=–ö–∞–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã —Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞ —ç—Ç—É —á–µ—Ä–µ–∑ FK?
SQL_L2_TABLE_PROMPT=–î–ª—è —á–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —ç—Ç–∞ —Ç–∞–±–ª–∏—Ü–∞?
SQL_L2_TABLE_INPUT_TEXT=–ö–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —ç—Ç–æ–π —Ç–∞–±–ª–∏—Ü–µ?

SQL_L1_FUNCTION_PROMPT=...
SQL_L2_FUNCTION_PROMPT=...
```

### Markdown:
```
MD_L1_SECTION_PROMPT=–û–ø–∏—à–∏ —Å–≤—è–∑–∏ —ç—Ç–æ–π —Å–µ–∫—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
MD_L1_SECTION_INPUT_TEXT=–ö–∞–∫–∏–µ –¥—Ä—É–≥–∏–µ —Å–µ–∫—Ü–∏–∏ –∏–ª–∏ –∫–æ–¥ —Å–≤—è–∑–∞–Ω—ã —Å —ç—Ç–æ–π?
MD_L2_SECTION_PROMPT=–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —ç—Ç–æ–π —Å–µ–∫—Ü–∏–∏
MD_L2_SECTION_INPUT_TEXT=–û —á–µ–º —ç—Ç–∞ —Å–µ–∫—Ü–∏—è –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏?
```

---

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

### 1. –°—Ç–æ–∏–º–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ L1/L2

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ L1/L2 - —ç—Ç–æ –∑–∞–ø—Ä–æ—Å –∫ –ø–ª–∞—Ç–Ω–æ–º—É AI API (OpenAI –∏–ª–∏ –¥—Ä—É–≥–æ–π LLM).

–î–ª—è –±–æ–ª—å—à–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (1000+ —Ñ—É–Ω–∫—Ü–∏–π):
- 1000 √ó 2 (L1 + L2) = 2000 –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ AI
- –ü—Ä–∏ —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω–µ ~$0.002 –∑–∞ –∑–∞–ø—Ä–æ—Å = ~$4 –∑–∞ –ø–æ–ª–Ω—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å L1/L2 —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–ª—é—á–µ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –∏–ª–∏ –ø–æ –∑–∞–ø—Ä–æ—Å—É.

### 2. –¢–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç mock AI —Å–µ—Ä–≤–∏—Å

**–ü—Ä–æ–±–ª–µ–º–∞:** –í —Ç–µ—Å—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `callAiService()`, –∫–æ—Ç–æ—Ä–∞—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏, –∞ –Ω–µ —Ä–µ–∞–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã –∫ OpenAI –∏–ª–∏ `REQ_SERVER_URL`.

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:** –ú–µ—Ö–∞–Ω–∏–∫–∞ —Ä–∞–±–æ—Ç—ã (API endpoints, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î, —Å–≤—è–∑–∏)  
**–ß—Ç–æ –ù–ï –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:** –ö–∞—á–µ—Å—Ç–≤–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã—Ö AI –æ–ø–∏—Å–∞–Ω–∏–π —Å–≤—è–∑–µ–π –∏ –ª–æ–≥–∏–∫–∏

**–†–µ—à–µ–Ω–∏–µ –¥–ª—è production:**
- –£–∫–∞–∑–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π `REQ_SERVER_URL` –≤ `.env`
- –£–±—Ä–∞—Ç—å –∏–ª–∏ –∑–∞–º–µ–Ω–∏—Ç—å mock-—Ñ—É–Ω–∫—Ü–∏—é –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π HTTP-–≤—ã–∑–æ–≤

### 3. –°–≤—è–∑–∏ –º–µ–∂–¥—É AI Items - —Ç–µ–∫—Å—Ç–æ–≤—ã–µ

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –≥—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π SQL-–∑–∞–ø—Ä–æ—Å–æ–º —Ç–∏–ø–∞:
```sql
SELECT * FROM ai_item WHERE depends_on = 'calculateTotal'
```

–°–≤—è–∑–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ –≤ —Ç–µ–∫—Å—Ç–µ L1 —á–∞–Ω–∫–æ–≤.

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞):**
- –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `ai_item_relations`
- –ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ L1 —á–∞–Ω–∫–∞ –ø–∞—Ä—Å–∏—Ç—å —Ç–µ–∫—Å—Ç –∏ –∏–∑–≤–ª–µ–∫–∞—Ç—å —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –¥—Ä—É–≥–∏—Ö AI Items
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å –∫–∞–∫ FK-—Å–≤—è–∑–∏ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∞

---

## –ò—Ç–æ–≥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞: –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

| –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å | –°—Ç–∞—Ç—É—Å | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏? | –ö–∞—á–µ—Å—Ç–≤–æ |
|------------------|--------|----------------|----------|
| –†–∞–∑–±–∏–µ–Ω–∏–µ JS –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏/–∫–ª–∞—Å—Å—ã | ‚úÖ –î–∞ | ‚úÖ –î–∞ | –í—ã—Å–æ–∫–æ–µ |
| –†–∞–∑–±–∏–µ–Ω–∏–µ SQL –Ω–∞ —Ç–∞–±–ª–∏—Ü—ã/—Ñ—É–Ω–∫—Ü–∏–∏ | ‚úÖ –î–∞ | ‚úÖ –î–∞ | –í—ã—Å–æ–∫–æ–µ |
| –†–∞–∑–±–∏–µ–Ω–∏–µ MD –Ω–∞ —Å–µ–∫—Ü–∏–∏ | ‚úÖ –î–∞ | ‚úÖ –î–∞ | –í—ã—Å–æ–∫–æ–µ |
| –°–æ–∑–¥–∞–Ω–∏–µ AI Items | ‚úÖ –î–∞ | ‚úÖ –î–∞ | –û—Ç–ª–∏—á–Ω–æ |
| –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ L0 —á–∞–Ω–∫–æ–≤ | ‚úÖ –î–∞ | ‚úÖ –î–∞ | –û—Ç–ª–∏—á–Ω–æ |
| –ì–µ–Ω–µ—Ä–∞—Ü–∏—è L1 —á–∞–Ω–∫–æ–≤ | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | ‚ùå –ù–µ—Ç | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç AI |
| –ì–µ–Ω–µ—Ä–∞—Ü–∏—è L2 —á–∞–Ω–∫–æ–≤ | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | ‚ùå –ù–µ—Ç | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç AI |
| API –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ L1/L2 | ‚úÖ –î–∞ | N/A | –û—Ç–ª–∏—á–Ω–æ |
| –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –ø—Ä–æ–º–ø—Ç–æ–≤ | ‚úÖ –î–∞ | ‚úÖ –î–∞ | –•–æ—Ä–æ—à–µ–µ |
| –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–æ–º–ø—Ç—ã | ‚úÖ –î–∞ | N/A | –û—Ç–ª–∏—á–Ω–æ |
| –°–≤—è–∑—å —á–∞–Ω–∫–æ–≤ —Å AI Items | ‚úÖ –î–∞ | ‚úÖ –î–∞ | –û—Ç–ª–∏—á–Ω–æ |
| End-to-end —Ç–µ—Å—Ç—ã | ‚úÖ –î–∞ | N/A | –•–æ—Ä–æ—à–µ–µ |
| –¢–µ—Å—Ç—ã –¥–ª—è SQL | ‚ùå –ù–µ—Ç | N/A | - |
| –†–µ–∞–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã AI –≤ —Ç–µ—Å—Ç–∞—Ö | ‚ùå –ù–µ—Ç | N/A | - |

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**AI Item** ‚Äî —ç—Ç–æ –∞–º–±–∏—Ü–∏–æ–∑–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∑–Ω–∞–Ω–∏–π —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–µ–π –æ–±—ä–µ–∫—Ç–æ–≤. –ò–¥–µ—è –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è, –Ω–æ **—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ—É—Å–ª–æ–∂–Ω–µ–Ω–∞**.

**–ü–æ–ª–µ–∑–Ω–æ—Å—Ç—å**: –≤—ã—Å–æ–∫–∞—è –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å —á–µ—Ç–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –∫–æ–¥–∞.

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**: —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫—É—é –ø–æ–ª—å–∑—É –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è. –°–∏—Å—Ç–µ–º–∞ —Ç—Ä–µ–±—É–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã—Ö —É—Å–∏–ª–∏–π –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –∏ –ø–æ–Ω–∏–º–∞–Ω–∏–µ.

–ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ **semantic code analysis**, –Ω–æ –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ —É–ø—Ä–æ—â–µ–Ω–∏–∏ –∏ –±–æ–ª–µ–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –æ–±—ä–µ–∫—Ç–æ–≤.

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ö–µ–º–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –§–∞–π–ª: shoppingCart.js                                          ‚îÇ
‚îÇ                                                                   ‚îÇ
‚îÇ  class ShoppingCart {                                            ‚îÇ
‚îÇ    calculateTotal() { ... }  ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                        ‚îÇ
‚îÇ    addItem() { ... }          ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ                        ‚îÇ
‚îÇ    removeItem() { ... }       ‚Üê‚îÄ‚îÄ‚îÄ‚îê ‚îÇ  ‚îÇ                        ‚îÇ
‚îÇ  }                                 ‚îÇ ‚îÇ  ‚îÇ                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ‚îÄ‚îÇ‚îÄ‚îÄ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                      ‚îÇ ‚îÇ  ‚îÇ
                  –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è JS     ‚îÇ ‚îÇ  ‚îÇ
                  splitJsByObjects()  ‚îÇ ‚îÇ  ‚îÇ
                                      ‚îÇ ‚îÇ  ‚îÇ
                                      ‚ñº ‚ñº  ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: ai_item                                            ‚îÇ
‚îÇ                                                                   ‚îÇ
‚îÇ  AI Item 1: "ShoppingCart.calculateTotal"                       ‚îÇ
‚îÇ  AI Item 2: "ShoppingCart.addItem"                              ‚îÇ
‚îÇ  AI Item 3: "ShoppingCart.removeItem"                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚îÇ –î–ª—è –∫–∞–∂–¥–æ–≥–æ AI Item:
                         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: chunk_vector                                       ‚îÇ
‚îÇ                                                                   ‚îÇ
‚îÇ  AI Item 1: ShoppingCart.calculateTotal                         ‚îÇ
‚îÇ  ‚îú‚îÄ L0 (0-–∏—Å—Ö–æ–¥–Ω–∏–∫) ‚úÖ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò                            ‚îÇ
‚îÇ  ‚îÇ   chunk_content: "calculateTotal() { items.reduce... }"      ‚îÇ
‚îÇ  ‚îÇ   level: "0-–∏—Å—Ö–æ–¥–Ω–∏–∫"                                        ‚îÇ
‚îÇ  ‚îÇ   ai_item_id: 1                                              ‚îÇ
‚îÇ  ‚îÇ                                                               ‚îÇ
‚îÇ  ‚îú‚îÄ L1 (1-—Å–≤—è–∑–∏) ‚ö†Ô∏è –í–†–£–ß–ù–£–Æ —á–µ—Ä–µ–∑ API                           ‚îÇ
‚îÇ  ‚îÇ   chunk_content: "–í—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é calculateDiscount..."     ‚îÇ
‚îÇ  ‚îÇ   level: "1-—Å–≤—è–∑–∏"                                           ‚îÇ
‚îÇ  ‚îÇ   parent_chunk_id: {L0.id}                                   ‚îÇ
‚îÇ  ‚îÇ   ai_item_id: 1                                              ‚îÇ
‚îÇ  ‚îÇ                                                               ‚îÇ
‚îÇ  ‚îî‚îÄ L2 (2-–ª–æ–≥–∏–∫–∞) ‚ö†Ô∏è –í–†–£–ß–ù–£–Æ —á–µ—Ä–µ–∑ API                          ‚îÇ
‚îÇ      chunk_content: "–°—É–º–º–∏—Ä—É–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ç–æ–≤–∞—Ä–æ–≤ –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç..." ‚îÇ
‚îÇ      level: "2-–ª–æ–≥–∏–∫–∞"                                          ‚îÇ
‚îÇ      parent_chunk_id: {L0.id}                                   ‚îÇ
‚îÇ      ai_item_id: 1                                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

–î–ª—è **–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π `REQ_SERVER_URL` —Å AI –º–æ–¥–µ–ª—å—é
2. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã –ø—Ä–æ–º–ø—Ç–æ–≤ –≤ `.env`
3. –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –º–∞—Å—Å–æ–≤–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ L1/L2 –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö AI Items
4. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –≤—ã–∑–æ–≤–∞–º–∏ AI –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏