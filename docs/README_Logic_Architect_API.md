# ğŸ§  Logic Architect API â€” Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¾Ğ² ÑĞµÑ€Ğ²ĞµÑ€Ğ°

## ĞĞ±Ğ·Ğ¾Ñ€

Logic Architect Ğ¿Ñ€ĞµĞ´Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ´Ğ²Ğ° Ñ€ĞµĞ¶Ğ¸Ğ¼Ğ° Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ° Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹:
1. **Client-side** â€” Ğ¿Ñ€ÑĞ¼Ğ¾Ğ¹ Ğ²Ñ‹Ğ·Ğ¾Ğ² Gemini API Ğ¸Ğ· Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğ°
2. **Server-side** â€” Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· Ñ‡ĞµÑ€ĞµĞ· ÑĞµÑ€Ğ²ĞµÑ€ 3200 (`POST /api/items/{id}/analyze-logic`)

Ğ­Ñ‚Ğ¾Ñ‚ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ Ğ¾Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ **ÑĞµÑ€Ğ²ĞµÑ€Ğ½Ğ¾Ğ³Ğ¾ Ñ€ĞµĞ¶Ğ¸Ğ¼Ğ°** Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¾Ğ² backend.

---

## API Endpoint

### `POST /api/items/{id}/analyze-logic`

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ñ‡ĞµÑ€ĞµĞ· ÑĞµÑ€Ğ²ĞµÑ€Ğ½Ñ‹Ğ¹ LLM (Gemini).

**ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹:**
- `id` (path) â€” full_name AiItem (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, `utils.fetchData`)
- `context-code` (query) â€” ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ´ Ğ´Ğ»Ñ Ğ¸Ğ·Ğ¾Ğ»ÑÑ†Ğ¸Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

**Request Body:** ĞŸÑƒÑÑ‚Ğ¾Ğµ (ÑĞµÑ€Ğ²ĞµÑ€ ÑĞ°Ğ¼ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¸Ğ· Ğ‘Ğ” Ğ¿Ğ¾ `id`)

**Response:**
```json
{
  "logic": "Ğ¢ĞµĞºÑÑ‚Ğ¾Ğ²Ğ¾Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¾Ğ¼ ÑĞ·Ñ‹ĞºĞµ...",
  "graph": {
    "nodes": [
      { "id": "start_1", "type": "start", "label": "ĞĞ°Ñ‡Ğ°Ğ»Ğ¾" },
      { "id": "decision_1", "type": "decision", "label": "ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ñ", "details": "..." },
      { "id": "process_1", "type": "process", "label": "ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…" },
      { "id": "end_1", "type": "end", "label": "ĞšĞ¾Ğ½ĞµÑ†" }
    ],
    "edges": [
      { "id": "e1", "from": "start_1", "to": "decision_1" },
      { "id": "e2", "from": "decision_1", "to": "process_1", "label": "Ğ”Ğ°" },
      { "id": "e3", "from": "process_1", "to": "end_1" }
    ]
  }
}
```

**ĞÑˆĞ¸Ğ±ĞºĞ¸:**
- `404` â€” AiItem Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½
- `500` â€” ĞÑˆĞ¸Ğ±ĞºĞ° LLM (SDK Ğ½Ğµ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½, API ĞºĞ»ÑÑ‡ Ğ¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒĞµÑ‚, Ğ¾ÑˆĞ¸Ğ±ĞºĞ° Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸)

-

---

## ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ Ğ´Ğ»Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ° Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸

ĞĞ¸Ğ¶Ğµ Ğ¿Ñ€Ğ¸Ğ²ĞµĞ´Ñ‘Ğ½ **Ğ°ĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚**, Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼Ñ‹Ğ¹ Ğ´Ğ»Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°:

```
ĞŸÑ€Ğ¾Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞ¹ ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ğ¸ÑÑ…Ğ¾Ğ´Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ´ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ¸ Ğ¿Ñ€ĞµĞ´Ğ¾ÑÑ‚Ğ°Ğ²ÑŒ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚Ğ²ĞµÑ‚.

Ğ˜Ğ¡Ğ¥ĞĞ”ĞĞ«Ğ™ ĞšĞĞ”:
${body}

ĞœĞ•Ğ¢ĞĞ”ĞĞĞĞ«Ğ•:
${JSON.stringify({
  signature: metadata.signature,
  called_functions: metadata.called_functions,
  tables: metadata.select_from,
  function_name: metadata.s_name,
  description: metadata.comment
}, null, 2)}

Ğ¢Ğ’ĞĞ¯ Ğ—ĞĞ”ĞĞ§Ğ Ğ¡ĞĞ¡Ğ¢ĞĞ˜Ğ¢ Ğ˜Ğ— Ğ”Ğ’Ğ£Ğ¥ Ğ§ĞĞ¡Ğ¢Ğ•Ğ™:

1. Ğ ĞĞ—Ğ”Ğ•Ğ› "logic" (Ğ¢ĞµĞºÑÑ‚Ğ¾Ğ²Ğ¾Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ):
- ĞĞ¿Ğ¸ÑˆĞ¸ Ğ»Ğ¾Ğ³Ğ¸ĞºÑƒ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ½Ğ° Ğ Ğ£Ğ¡Ğ¡ĞšĞĞœ Ğ¯Ğ—Ğ«ĞšĞ•.
- ĞŸĞµÑ€ĞµÑ‡Ğ¸ÑĞ»Ğ¸ Ğ²ÑĞµ Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ (Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğµ Ğ¸Ğ¼ĞµĞ½Ğ°, ĞµÑĞ»Ğ¸ Ğ¾Ğ½Ğ¸ Ğ¸Ğ·Ğ²ĞµÑÑ‚Ğ½Ñ‹).
- Ğ£ĞºĞ°Ğ¶Ğ¸, ĞºĞ°ĞºĞ¸Ğµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ Ñ‡Ğ¸Ñ‚Ğ°ÑÑ‚ÑÑ (SELECT) Ğ¸ Ğ² ĞºĞ°ĞºĞ¸Ğµ Ğ·Ğ°Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ÑÑ‚ÑÑ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ (INSERT/UPDATE/DELETE).
- ĞĞ¿Ğ¸ÑˆĞ¸ Ğ²ÑĞµ Ğ²ĞµÑ‚Ğ²Ğ»ĞµĞ½Ğ¸Ñ (if/else, switch) Ğ¸ Ñ†Ğ¸ĞºĞ»Ñ‹.
- ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ±Ñ‹Ñ‚ÑŒ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼ Ğ¸ Ñ‚Ğ¾Ñ‡Ğ½Ñ‹Ğ¼.
- ĞÑ‚Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€ÑƒĞ¹ Ñ‚ĞµĞºÑÑ‚ Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ±Ñ‹Ğ»Ğ¾ ĞºÑ€Ğ°ÑĞ¸Ğ²Ğ¾ Ğ¸ Ğ¿Ğ¾Ğ½ÑÑ‚Ğ½Ğ¾.

2. Ğ ĞĞ—Ğ”Ğ•Ğ› "graph" (Ğ“Ñ€Ğ°Ñ„ Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ° ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ):
Ğ¡Ğ¾Ğ±Ğ»ÑĞ´Ğ°Ğ¹ ÑÑ‚Ñ€Ğ¾Ğ³Ğ¸Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ° ÑĞ²ÑĞ·ĞµĞ¹:
- 'start': ĞĞ°Ñ‡Ğ°Ğ»Ğ¾ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸. Ğ Ğ¾Ğ²Ğ½Ğ¾ ĞĞ”ĞĞ Ğ¸ÑÑ…Ğ¾Ğ´ÑÑ‰Ğ°Ñ ÑĞ²ÑĞ·ÑŒ.
- 'decision': Ğ Ğ°Ğ·Ğ²Ğ¸Ğ»ĞºĞ°/ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ğµ. ĞœĞ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ Ğ”Ğ’Ğ• Ğ¸ÑÑ…Ğ¾Ğ´ÑÑ‰Ğ¸Ğµ ÑĞ²ÑĞ·Ğ¸ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, "Ğ”Ğ°"/"ĞĞµÑ‚").
- 'process': ĞĞ±Ñ‹Ñ‡Ğ½Ğ¾Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ Ğ¸Ğ»Ğ¸ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ. ĞĞ´Ğ¸Ğ½ Ğ²Ñ…Ğ¾Ğ´, Ğ¾Ğ´Ğ¸Ğ½ Ğ²Ñ‹Ñ…Ğ¾Ğ´.
- 'db_call': ĞĞ¿ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ñ Ğ‘Ğ”. ĞĞ´Ğ¸Ğ½ Ğ²Ñ…Ğ¾Ğ´, Ğ¾Ğ´Ğ¸Ğ½ Ğ²Ñ‹Ñ…Ğ¾Ğ´ (Ñ‚Ñ€Ğ°ĞºÑ‚ÑƒĞµÑ‚ÑÑ ĞºĞ°Ğº Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑ).
- 'end' Ğ¸Ğ»Ğ¸ 'exception': Ğ¢Ğ¾Ñ‡ĞºĞ¸ Ğ²Ñ‹Ñ…Ğ¾Ğ´Ğ°. ĞœĞ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ Ğ¾Ğ´Ğ¸Ğ½ Ğ²Ñ…Ğ¾Ğ´, ĞĞĞ›Ğ¬ Ğ¸ÑÑ…Ğ¾Ğ´ÑÑ‰Ğ¸Ñ… ÑĞ²ÑĞ·ĞµĞ¹.

Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ ĞºÑ€Ğ°Ñ‚ĞºĞ¸Ğµ Ğ¸ Ğ¿Ğ¾Ğ½ÑÑ‚Ğ½Ñ‹Ğµ Ğ¼ĞµÑ‚ĞºĞ¸ (labels) Ğ´Ğ»Ñ ÑƒĞ·Ğ»Ğ¾Ğ² Ğ¸ ÑĞ²ÑĞ·ĞµĞ¹.
```

---

## JSON Schema Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°

Gemini Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ JSON ÑĞ¾Ğ³Ğ»Ğ°ÑĞ½Ğ¾ ÑÑ…ĞµĞ¼Ğµ:

```javascript
const RESPONSE_SCHEMA = {
  type: Type.OBJECT,
  properties: {
    logic: {
      type: Type.STRING,
      description: "Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸ Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¾Ğ¼ ÑĞ·Ñ‹ĞºĞµ: Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸, Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹, ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ñ."
    },
    graph: {
      type: Type.OBJECT,
      properties: {
        nodes: {
          type: Type.ARRAY,
          items: {
            type: Type.OBJECT,
            properties: {
              id: { type: Type.STRING },
              type: {
                type: Type.STRING,
                enum: ['start', 'end', 'decision', 'process', 'db_call', 'exception']
              },
              label: { type: Type.STRING },
              details: { type: Type.STRING }
            },
            required: ['id', 'type', 'label']
          }
        },
        edges: {
          type: Type.ARRAY,
          items: {
            type: Type.OBJECT,
            properties: {
              id: { type: Type.STRING },
              from: { type: Type.STRING },
              to: { type: Type.STRING },
              label: { type: Type.STRING }
            },
            required: ['id', 'from', 'to']
          }
        }
      },
      required: ['nodes', 'edges']
    }
  },
  required: ['logic', 'graph']
};
```

---

## Ğ¢Ğ¸Ğ¿Ñ‹ ÑƒĞ·Ğ»Ğ¾Ğ² Ğ³Ñ€Ğ°Ñ„Ğ°

| Ğ¢Ğ¸Ğ¿ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | Ğ¦Ğ²ĞµÑ‚ Ğ² UI |
|-----|----------|-----------|
| `start` | ĞĞ°Ñ‡Ğ°Ğ»Ğ¾ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸. Ğ Ğ¾Ğ²Ğ½Ğ¾ 1 Ğ¸ÑÑ…Ğ¾Ğ´ÑÑ‰Ğ°Ñ ÑĞ²ÑĞ·ÑŒ | ğŸŸ¢ Ğ—ĞµĞ»Ñ‘Ğ½Ñ‹Ğ¹ |
| `end` | ĞšĞ¾Ğ½ĞµÑ† Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸. 0 Ğ¸ÑÑ…Ğ¾Ğ´ÑÑ‰Ğ¸Ñ… ÑĞ²ÑĞ·ĞµĞ¹ | ğŸ”´ ĞšÑ€Ğ°ÑĞ½Ñ‹Ğ¹ |
| `decision` | Ğ£ÑĞ»Ğ¾Ğ²Ğ¸Ğµ/Ñ€Ğ°Ğ·Ğ²Ğ¸Ğ»ĞºĞ°. ĞœĞ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 2 Ğ¸ÑÑ…Ğ¾Ğ´ÑÑ‰Ğ¸Ñ… ÑĞ²ÑĞ·Ğ¸ | ğŸŸ  ĞÑ€Ğ°Ğ½Ğ¶ĞµĞ²Ñ‹Ğ¹ |
| `process` | ĞĞ±Ñ‹Ñ‡Ğ½Ğ¾Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ. 1 Ğ²Ñ…Ğ¾Ğ´, 1 Ğ²Ñ‹Ñ…Ğ¾Ğ´ | ğŸ”µ Ğ¡Ğ¸Ğ½Ğ¸Ğ¹ |
| `db_call` | ĞĞ¿ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ñ Ğ‘Ğ”. 1 Ğ²Ñ…Ğ¾Ğ´, 1 Ğ²Ñ‹Ñ…Ğ¾Ğ´ | ğŸŸ£ Ğ¤Ğ¸Ğ¾Ğ»ĞµÑ‚Ğ¾Ğ²Ñ‹Ğ¹ |
| `exception` | ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº. 0 Ğ¸ÑÑ…Ğ¾Ğ´ÑÑ‰Ğ¸Ñ… ÑĞ²ÑĞ·ĞµĞ¹ | ğŸ©· Ğ Ğ¾Ğ·Ğ¾Ğ²Ñ‹Ğ¹ |

---

## ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

```javascript
// POST /api/items/:id/analyze-logic
app.post('/api/items/:id/analyze-logic', async (req, res) => {
  try {
    const { id } = req.params;
    const contextCode = req.query['context-code'] || 'default';
    
    console.log(`[API] Analyzing logic for item: ${id}`);

    // 1. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ AiItem Ğ¸Ğ· Ğ‘Ğ”
    const item = await getAiItemById(id, contextCode);
    if (!item) {
      return res.status(404).json({ 
        success: false,
        error: `AiItem with id '${id}' not found` 
      });
    }

    // 2. Ğ¤Ğ¾Ñ€Ğ¼Ğ¸Ñ€ÑƒĞµĞ¼ Ğ¼ĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
    const metadata = {
      body: item.l0_code,
      s_name: item.id,
      full_name: item.id,
      comment: item.l2_desc,
      called_functions: item.l1_out,
      signature: null,
      select_from: null
    };

    // 3. Ğ’Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ Gemini
    const result = await analyzeLogicWithGemini(item.l0_code, metadata);

    // 4. Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµĞ¼ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚
    console.log(`[API] Logic analysis completed for: ${id}`);
    res.json(result);

  } catch (error) {
    console.error('[API] Error analyzing logic:', error);
    
    if (error.message.includes('Gemini SDK')) {
      return res.status(500).json({
        success: false,
        error: 'Gemini SDK is not installed. Run: npm install @google/genai'
      });
    }
    
    if (error.message.includes('API_KEY')) {
      return res.status(500).json({
        success: false,
        error: 'API_KEY environment variable is not configured'
      });
    }

    res.status(500).json({
      success: false,
      error: 'Failed to analyze logic: ' + error.message
    });
  }
});
```

---

---

## Ğ¡Ğ²ÑĞ·Ğ°Ğ½Ğ½Ñ‹Ğµ endpoints

| Endpoint | ĞœĞµÑ‚Ğ¾Ğ´ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|----------|-------|----------|
| `/api/items/{id}/analyze-logic` | POST | ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸ Ñ‡ĞµÑ€ĞµĞ· LLM |
| `/api/items/{id}/logic-graph` | GET | ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ñ‘Ğ½Ğ½Ñ‹Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· |
| `/api/items/{id}/logic-graph` | POST | Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· |
| `/api/items/{id}/logic-graph` | PUT | ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· |
| `/api/items/{id}/logic-graph` | DELETE | Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· |

---

## ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LogicArchitectDialog (UI)                                  â”‚
â”‚    â”œâ”€â”€ Build (Client) â†’ logicAnalyzerService â†’ Gemini API  â”‚
â”‚    â””â”€â”€ Build (Server) â†’ apiClient â†’ Server 3200 â†’ Gemini   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Server 3200                                                 â”‚
â”‚    POST /api/items/:id/analyze-logic                         â”‚
â”‚      1. getAiItemById(id) â†’ Ğ‘Ğ”                              â”‚
â”‚      2. analyzeLogicWithGemini(body, metadata) â†’ Gemini API â”‚
â”‚      3. return { logic, graph }                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

*ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½ĞµĞµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ: Ğ¯Ğ½Ğ²Ğ°Ñ€ÑŒ 2026*
